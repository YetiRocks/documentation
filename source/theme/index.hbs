<!DOCTYPE html>
<html lang="{{ language }}" dir="ltr">
<head>
    <meta charset="UTF-8">
    <title>Documentation | Yeti | {{ chapter_title }}</title>
    <meta name="description" content="{{ description }}">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#121212">

    <link rel="icon" href="{{ path_to_root }}favicon.png">
    <link rel="shortcut icon" href="{{ path_to_root }}favicon.png">

    <!-- FontAwesome for icons -->
    <link rel="stylesheet" href="{{ path_to_root }}FontAwesome/css/font-awesome.css">

    <!-- Yeti design system + documentation overrides (no mdbook CSS) -->
    {{#each additional_css}}
    <link rel="stylesheet" href="{{ ../path_to_root }}{{ this }}">
    {{/each}}

    {{#if mathjax_support}}
    <!-- MathJax -->
    <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    {{/if}}

    <!-- Search -->
    <script>
        const path_to_root = "{{ path_to_root }}";
        const default_light_theme = "rust";
        const default_dark_theme = "navy";
        window.path_to_searchindex_js = "{{ path_to_root }}searchindex.js";
        window.playground_copyable = true;
    </script>
    <script src="{{ path_to_root }}toc.js"></script>
</head>
<body class="sidebar-visible coal">
    <!-- Force coal (dark) theme -->
    <script>
        const html = document.documentElement;
        html.classList.add("coal");
        html.classList.add("js");
        localStorage.setItem('mdbook-theme', 'coal');
    </script>

    <!-- Yeti Header — matches www site top nav -->
    <header class="yeti-header">
        <div class="header-left">
            <a href="/"><img src="{{ path_to_root }}logo_white.svg" class="header-logo" alt="Yeti"></a>
        </div>
        <div class="header-center">
            <a href="/" class="nav-link">Home</a>
            <a href="/platform" class="nav-link">Platform</a>
            <a href="/applications" class="nav-link">Applications</a>
            <a href="/benchmarks" class="nav-link">Benchmarks</a>
            <a href="/demos" class="nav-link">Demos</a>
            <a href="/documentation/" class="nav-link active">Documentation</a>
        </div>
        <div class="header-right">
            <div id="search-wrapper" class="header-search">
                <i class="fa fa-search header-search-icon"></i>
                <form id="searchbar-outer" class="header-search-form">
                    <input type="search" id="searchbar" name="searchbar" placeholder="Search..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                </form>
            </div>
        </div>
    </header>
    <!-- Hidden search-toggle stub for searcher.js compatibility -->
    <button id="search-toggle" style="display:none" aria-expanded="false"></button>

    <div id="body-container">
        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Sidebar visibility -->
        <script>
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            let sidebarState = 'visible';
            if (document.body.clientWidth < 1080) {
                sidebarState = 'hidden';
            } else {
                try { sidebarState = localStorage.getItem('mdbook-sidebar') || 'visible'; } catch(e) {}
            }
            sidebar_toggle.checked = (sidebarState === 'visible');
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="{{ path_to_root }}toc.html"></iframe>
            </noscript>
        </nav>

        <!-- Hamburger toggle — always visible, attached to sidebar's right edge -->
        <label id="sidebar-toggle" class="sidebar-hamburger" for="sidebar-toggle-anchor" title="Toggle sidebar" aria-label="Toggle sidebar" aria-expanded="true" aria-controls="sidebar">
            <i class="fa fa-bars"></i>
        </label>

        <div id="page-wrapper" class="page-wrapper">
            <div class="page">
                <!-- Search Results -->
                <div id="searchresults-outer" class="searchresults-outer hidden">
                    <div id="searchresults-header" class="searchresults-header"></div>
                    <ul id="searchresults"></ul>
                </div>

                <!-- Content -->
                <div id="content" class="content">
                    <main>
                        {{{ content }}}
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        {{#previous}}
                        <a rel="prev" href="{{ path_to_root }}{{ link }}" class="nav-prev" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                            <i class="fa fa-angle-left"></i>
                            <span class="nav-label">{{ title }}</span>
                        </a>
                        {{/previous}}
                        {{#next}}
                        <a rel="next" href="{{ path_to_root }}{{ link }}" class="nav-next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                            <span class="nav-label">{{ title }}</span>
                            <i class="fa fa-angle-right"></i>
                        </a>
                        {{/next}}
                    </nav>
                </div>
            </div>
        </div>
    </div>

    {{#if live_reload_endpoint}}
    <script>
        const defined_ws_url = "{{{ live_reload_endpoint }}}";
        const defined_protocol = location.protocol === "https:" ? "wss:" : "ws:";
        const defined_host = location.host;
        const defined_endpoint = defined_ws_url || `${defined_protocol}//${defined_host}/_livereload`;
        const socket = new WebSocket(defined_endpoint);
        socket.onmessage = function (event) {
            if (event.data === "reload") {
                socket.close();
                location.reload();
            }
        };
        window.onbeforeunload = function() { socket.close(); };
    </script>
    {{/if}}

    {{#if search_enabled}}
    <script src="{{ path_to_root }}elasticlunr.min.js"></script>
    <script src="{{ path_to_root }}mark.min.js"></script>
    <script src="{{ path_to_root }}searcher.js"></script>
    {{/if}}

    <script src="{{ path_to_root }}clipboard.min.js"></script>
    <script src="{{ path_to_root }}highlight.js"></script>
    <script>
    // Register GraphQL language for highlight.js
    if (window.hljs) {
      hljs.registerLanguage('graphql', function(hljs) {
        return {
          name: 'GraphQL',
          aliases: ['gql'],
          keywords: {
            keyword: 'type input enum union interface implements extend schema directive scalar fragment query mutation subscription on',
            literal: 'true false null',
          },
          contains: [
            hljs.HASH_COMMENT_MODE,
            hljs.QUOTE_STRING_MODE,
            hljs.NUMBER_MODE,
            // Directives (@table, @export, etc.) — meta class = yellow
            { className: 'meta', begin: '\\@[a-zA-Z_]\\w*' },
            // Built-in types (ID, String, Int, Float, Boolean, Date) — type class = green
            { className: 'type', begin: '\\b(ID|String|Int|Float|Boolean|Date)\\b' },
            // Field names (word followed by colon) — attr class = purple
            { className: 'attr', begin: '[a-zA-Z_]\\w*(?=\\s*:)' },
            // Punctuation
            { className: 'punctuation', begin: '[!{}()\\[\\]:=|]' },
            // Variables
            { className: 'variable', begin: '\\$[a-zA-Z_]\\w*' },
          ],
        };
      });
      // Re-highlight any graphql blocks
      document.querySelectorAll('code.language-graphql').forEach(function(block) {
        hljs.highlightElement(block);
      });
    }
    </script>
    <script src="{{ path_to_root }}book.js"></script>
    <script>
    // Override scroll-to-top to only scroll the content area, not the sidebar
    (function() {
        var pw = document.getElementById('page-wrapper');
        if (pw) {
            // Patch: book.js uses document.scrollingElement.scrollTo — redirect to #page-wrapper
            var origScrollTo = Element.prototype.scrollTo;
            Object.defineProperty(document.scrollingElement, 'scrollTo', {
                value: function(opts) { origScrollTo.call(pw, opts); },
                writable: true
            });
            Object.defineProperty(document.scrollingElement, 'scrollTop', {
                get: function() { return pw.scrollTop; },
                set: function(v) { pw.scrollTop = v; }
            });
        }
    })();
    </script>

    {{#each additional_js}}
    <script src="{{ ../path_to_root }}{{ this }}"></script>
    {{/each}}

    <!-- Eagerly load search index since searchbar is always visible -->
    <script>
    (function() {
        // Trigger search index load by simulating showSearch
        const searchbar = document.getElementById('searchbar');
        if (searchbar) {
            searchbar.addEventListener('focus', function onFirstFocus() {
                // Click the hidden search-toggle to trigger index load
                const toggle = document.getElementById('search-toggle');
                if (toggle) toggle.click();
                searchbar.removeEventListener('focus', onFirstFocus);
            }, { once: true });
            // Also load immediately if search param is in URL
            if (window.location.search.includes('search=')) {
                const toggle = document.getElementById('search-toggle');
                if (toggle) setTimeout(() => toggle.click(), 100);
            }
        }
    })();
    </script>
</body>
</html>
